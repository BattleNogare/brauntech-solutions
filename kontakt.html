<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>BraunTech Solutions ‚Äì Kontakt</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Hauptlayout -->
    <link rel="stylesheet" href="brauntech.css">
    <!-- Hintergrund / Effekte -->
    <link rel="stylesheet" href="custom.d/background.css">
    <script src="custom.d/background.js" defer></script>

    <style>
        /* ===========================
           Kontaktseite ‚Äì Zusatzstyles
        ============================ */

        .bt-page-contact {
            padding-top: 2.5rem;
            padding-bottom: 3.5rem;
        }

        .bt-page-contact-header {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            margin-bottom: 2rem;
            max-width: 720px;
        }

        .bt-page-contact-header h1 {
            margin: 0;
        }

        .bt-page-contact-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
            align-items: flex-start;
        }

        .bt-page-contact-meta small {
            color: var(--bt-text-muted);
        }

        .bt-contact-intro {
            max-width: 720px;
            color: var(--bt-text-muted);
        }

        /* Layout: Infos + Formular */

        .bt-contact-grid {
            display: grid;
            grid-template-columns: minmax(0, 1.1fr) minmax(0, 1.4fr);
            gap: 2rem;
            align-items: flex-start;
        }

        .bt-contact-panel,
        .bt-form-card {
            /* nutzen das globale Card-Design */
        }

        .bt-contact-panel h2,
        .bt-form-card h2 {
            margin-top: 0;
            margin-bottom: 0.75rem;
        }

        .bt-contact-panel p {
            margin-top: 0.25rem;
            color: var(--bt-text-muted);
        }

        .bt-contact-list {
            list-style: none;
            padding: 0;
            margin: 1rem 0 0;
        }

        .bt-contact-list li {
            margin-bottom: 0.45rem;
            display: flex;
            gap: 0.5rem;
            align-items: baseline;
            color: var(--bt-text-muted);
            font-size: 0.95rem;
        }

        .bt-contact-list span.bt-contact-icon {
            font-size: 1.05rem;
            opacity: 0.9;
        }

        /* Bild mit Rahmen */

        .bt-contact-image-wrapper {
            margin-top: 1.4rem;
            border-radius: var(--bt-radius);
            border: 1px solid rgba(57,255,20,0.35);
            box-shadow: 
                0 0 18px rgba(57,255,20,0.4),
                0 0 35px rgba(0,0,0,0.9);
            overflow: hidden;
            background: radial-gradient(circle at top, #07150c, #020604);
        }

        .bt-contact-image-wrapper img {
            width: 100%;
            display: block;
            opacity: 0.95;
            transition: 0.4s ease;
        }

        .bt-contact-image-wrapper:hover img {
            transform: scale(1.03);
            opacity: 1;
        }

        .bt-contact-image-caption {
            padding: 0.5rem 0.75rem;
            color: var(--bt-text-muted);
            font-size: 0.8rem;
            font-family: var(--bt-font-mono);
            text-transform: uppercase;
            letter-spacing: 0.06em;
        }

        /* Formular */

        .bt-form {
            margin-top: 1.1rem;
        }

        .bt-form-row {
            margin-bottom: 1rem;
        }

        .bt-form-row label {
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.06em;
            color: var(--bt-text-muted);
            margin-bottom: 0.3rem;
            display: block;
        }

        .bt-required {
            color: var(--green-light);
        }

        .bt-checkbox-row {
            display: flex;
            gap: 0.6rem;
            align-items: flex-start;
        }

        .bt-checkbox-label {
            font-size: 0.85rem;
            color: var(--bt-text-muted);
        }

        /* ===========================
           Termin-Slots (Neon Buttons)
        ============================ */

        .bt-slots-wrap {
            margin-top: 0.4rem;
            display: grid;
            gap: 0.6rem;
        }

        .bt-slots-note {
            color: var(--bt-text-muted);
            font-size: 0.8rem;
        }

        .bt-slots-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(92px, 1fr));
            gap: 0.5rem;
        }

        .bt-slot-btn {
            appearance: none;
            border: 1px solid rgba(57,255,20,0.35);
            background: rgba(3,12,7,0.9);
            color: var(--bt-text);
            font-family: var(--bt-font-mono);
            padding: 0.5rem;
            border-radius: 6px;
            cursor: pointer;
            transition: 0.15s ease;
        }

        .bt-slot-btn:hover {
            transform: translateY(-1px);
            border-color: var(--green-light);
            color: var(--green-light);
            box-shadow: 
                0 0 14px rgba(57,255,20,0.35),
                0 0 28px rgba(57,255,20,0.15);
        }

        .bt-slot-btn.active {
            background: radial-gradient(circle at top left, var(--green-light), var(--green-mid));
            color: #021005;
            border-color: var(--green-neon);
            transform: translateY(-1px);
            box-shadow:
                0 0 18px rgba(57,255,20,0.75),
                0 0 40px rgba(0, 0, 0, 0.9);
        }

        .bt-slot-empty {
            color: var(--bt-text-muted);
            padding: 0.6rem;
            text-align: center;
            border: 1px dashed var(--bt-border);
            border-radius: 6px;
        }

    </style>
</head>
<body>

<!-- Effekte -->
<div id="bt-glow-orbits"></div>
<div id="bt-points"></div>

<!-- NAV -->
<header class="bt-header" data-include="custom.d/navbar.html"></header>

<main class="bt-main">
<div class="bt-container bt-page-contact">

    <!-- HEADER -->
    <header class="bt-page-contact-header">
        <div class="bt-page-contact-meta">
            <span class="bt-pill">
                <span class="bt-pill-dot"></span>
                Kontakt ¬∑ Anfrage
            </span>
            <small>BraunTech Solutions ¬∑ Knuffingen</small>
        </div>
        <h1>So erreichen Sie BraunTech Solutions</h1>
        <p class="bt-contact-intro">
            Egal ob Recycling, Materialaufbereitung oder digitale L√∂sungen ‚Äì  
            √ºber dieses Formular oder direkt per Telefon erreichen Sie uns.
        </p>
    </header>

    <!-- GRID -->
    <section class="bt-section">
        <div class="bt-contact-grid">

            <!-- INFOCARD -->
            <section class="bt-card bt-card-accent bt-contact-panel">
                <h2>Direkter Kontakt</h2>
                <p>Sie erreichen uns telefonisch oder √ºber das Formular.</p>

                <ul class="bt-contact-list">
                    <li>
                        <span class="bt-contact-icon">üè¢</span>
                        <span>
                            <strong>BraunTech Solutions</strong><br>
                            Knuffingen, Hohenstein<br>
                            Deutschland
                        </span>
                    </li>
                    <li>
                        <span class="bt-contact-icon">üìû</span>
                        <span>
                            Telefon: <a href="tel:+491234567890">+49 1234 567890</a>
                        </span>
                    </li>
                </ul>

                <div class="bt-contact-image-wrapper">
                    <img src="bilder/kontakt-bild.png" alt="Kontakt Bild">
                    <div class="bt-contact-image-caption">Wir helfen Ihnen weiter</div>
                </div>
            </section>

            <!-- KONTAKTFORMULAR -->
            <section class="bt-card bt-form-card" aria-labelledby="kontakt-heading">
                <h2 id="kontakt-heading">Wie d√ºrfen wir Ihnen helfen?</h2>

                <form id="kontakt-form" class="bt-form" novalidate>

                    <div class="bt-form-row">
                        <label for="kontakt-name">Name<span class="bt-required">*</span></label>
                        <input class="bt-input" id="kontakt-name" required>
                    </div>

                    <div class="bt-form-row">
                        <label for="kontakt-betreff">Betreff<span class="bt-required">*</span></label>
                        <input class="bt-input" id="kontakt-betreff" required>
                    </div>

                    <div class="bt-form-row">
                        <label for="kontakt-nachricht">Nachricht<span class="bt-required">*</span></label>
                        <textarea class="bt-textarea" id="kontakt-nachricht" required></textarea>
                    </div>

                    <div class="bt-form-row">
                        <div class="bt-checkbox-row">
                            <input type="checkbox" id="kontakt-datenschutz" required>
                            <label class="bt-checkbox-label">
                                Ich akzeptiere die <a href="datenschutz.html">Datenschutzbestimmungen</a>.
                                <span class="bt-required">*</span>
                            </label>
                        </div>
                    </div>

                    <div class="bt-form-actions">
                        <button class="bt-btn-primary" id="kontakt-submit">Senden</button>
                        <div id="form-status" class="bt-form-status"></div>
                    </div>

                </form>
            </section>

        </div>
    </section>

    <!-- TERMIN-BUCHUNG -->
    <section class="bt-section">
        <section class="bt-card bt-appointment-card" aria-labelledby="termin-heading">
            <h2 id="termin-heading">Termin vereinbaren</h2>
            <p class="bt-appointment-hint">
                Slots √† 15 Minuten:  
                <strong>Di‚ÄìFr 18:30‚Äì22:00</strong> ¬∑ <strong>Sa‚ÄìSo 11:00‚Äì22:00</strong>
            </p>

            <form id="termin-form" class="bt-form" novalidate>

                <div class="bt-appointment-grid">
                    <div class="bt-form-row">
                        <label for="termin-name">Name<span class="bt-required">*</span></label>
                        <input class="bt-input" id="termin-name" required>
                    </div>

                    <div class="bt-form-row">
                        <label for="termin-grund">Grund des Termins<span class="bt-required">*</span></label>
                        <input class="bt-input" id="termin-grund" required>
                    </div>

                    <div class="bt-form-row">
                        <label for="termin-datum">Datum<span class="bt-required">*</span></label>
                        <input type="date" class="bt-input" id="termin-datum" required>
                    </div>

                    <div class="bt-form-row">
                        <label>Uhrzeit (15-Min)</label>

                        <!-- Hidden Value -->
                        <input type="hidden" id="termin-uhrzeit" required>

                        <div class="bt-slots-wrap">
                            <span id="slots-note" class="bt-slots-note">
                                Bitte zuerst ein Datum w√§hlen.
                            </span>

                            <div id="slots-grid" class="bt-slots-grid"></div>
                        </div>
                    </div>
                </div>

                <div class="bt-form-actions">
                    <button class="bt-btn-primary" id="termin-submit">Termin anfragen</button>
                    <div id="termin-status" class="bt-form-status"></div>
                </div>

            </form>
        </section>
    </section>

</div>
</main>

<!-- FOOTER -->
<footer class="bt-footer" data-include="custom.d/footer.html"></footer>

<script>
/* HEADER + FOOTER Loader */
document.addEventListener("DOMContentLoaded", () => {
    document.querySelectorAll("[data-include]").forEach(el => {
        fetch(el.getAttribute("data-include"))
            .then(r => r.text())
            .then(html => el.innerHTML = html);
    });
});

/* YEAR FIX */
setTimeout(() => {
    let y = document.getElementById("bt-year");
    if (y) y.textContent = new Date().getFullYear();
}, 500);

/* DISCORD WEBHOOK */
const WEBHOOK_URL = "https://discord.com/api/webhooks/1441017696643715225/Gi1xR16YB1hj_JjXwcjmcSu6d0kbIHd5JM0BxYy3fnjJ5NG54LGAifL2V6xUg4diTRIQ";

/* ===========================================
   KONTAKTFORMULAR
=========================================== */
(function () {
    const form = document.getElementById("kontakt-form");
    const btn = document.getElementById("kontakt-submit");
    const status = document.getElementById("form-status");

    form.addEventListener("submit", e => {
        e.preventDefault();

        if (!form.checkValidity()) return form.reportValidity();

        const name = kontakt-name.value.trim();
        const betreff = kontakt-betreff.value.trim();
        const nachricht = kontakt-nachricht.value.trim();

        btn.disabled = true;
        btn.textContent = "Senden‚Ä¶";

        const embed = {
            title: "Neue Kontaktanfrage",
            color: 0x39ff14,
            fields: [
                { name: "Name", value: name },
                { name: "Betreff", value: betreff },
                { name: "Nachricht", value: nachricht }
            ],
            timestamp: new Date()
        };

        fetch(WEBHOOK_URL, {
            method: "POST",
            headers: {"Content-Type":"application/json"},
            body: JSON.stringify({content:"üì© Neue Kontaktanfrage", embeds:[embed]})
        }).then(() => {
            form.reset();
            status.textContent = "Nachricht gesendet!";
            status.style.color = "#39ff14";
        }).catch(() => {
            status.textContent = "Fehler beim Senden!";
            status.style.color = "#ff4444";
        }).finally(() => {
            btn.disabled = false;
            btn.textContent = "Senden";
        });
    });
})();

/* ===========================================
   TERMIN ‚Äì SLOT GENERATOR
=========================================== */
(function () {
    const dateInput = document.getElementById("termin-datum");
    const timeHidden = document.getElementById("termin-uhrzeit");
    const slotsGrid = document.getElementById("slots-grid");
    const slotsNote = document.getElementById("slots-note");
    const form = document.getElementById("termin-form");
    const btn = document.getElementById("termin-submit");
    const status = document.getElementById("termin-status");

    function pad(n){return String(n).padStart(2,"0");}

    function buildSlots(dateStr) {
        slotsGrid.innerHTML = "";
        timeHidden.value = "";

        if (!dateStr) {
            slotsNote.textContent = "Bitte zuerst ein Datum w√§hlen.";
            return;
        }

        const d = new Date(dateStr+"T00:00:00");
        const day = d.getDay();

        let start = null, end = null;

        if (day >= 2 && day <= 5) { start = 18*60+30; end = 22*60; }
        if (day === 6 || day === 0) { start = 11*60; end = 22*60; }

        if (start === null) {
            slotsNote.textContent = "Keine Termine an diesem Tag.";
            slotsGrid.innerHTML = `<div class="bt-slot-empty">Keine Slots</div>`;
            return;
        }

        slotsNote.textContent = "W√§hle einen freien Zeit-Slot:";

        for (let m = start; m <= end; m += 15) {
            let hh = pad(Math.floor(m/60));
            let mm = pad(m%60);
            let time = `${hh}:${mm}`;

            let btn = document.createElement("button");
            btn.type = "button";
            btn.className = "bt-slot-btn";
            btn.textContent = time;

            btn.addEventListener("click", () => {
                slotsGrid.querySelectorAll(".bt-slot-btn.active")
                    .forEach(b => b.classList.remove("active"));
                btn.classList.add("active");
                timeHidden.value = time;
            });

            slotsGrid.appendChild(btn);
        }
    }

    dateInput.addEventListener("change", () => buildSlots(dateInput.value));

    /* Termin senden */
    form.addEventListener("submit", e => {
        e.preventDefault();
        if (!form.checkValidity()) return form.reportValidity();
        if (!timeHidden.value) {
            status.textContent = "Bitte einen Slot w√§hlen!";
            status.style.color = "#ff4444";
            return;
        }

        const name = termin-name.value.trim();
        const grund = termin-grund.value.trim();
        const datum = termin-datum.value;
        const uhrzeit = timeHidden.value;

        btn.disabled = true;
        btn.textContent = "Senden‚Ä¶";

        const embed = {
            title: "Neue Terminanfrage",
            color: 0x39ff14,
            fields: [
                {name:"Name", value:name},
                {name:"Grund", value:grund},
                {name:"Datum", value:datum, inline:true},
                {name:"Uhrzeit", value:uhrzeit, inline:true},
                {name:"Dauer", value:"15 Minuten", inline:true}
            ],
            timestamp: new Date()
        };

        fetch(WEBHOOK_URL, {
            method:"POST",
            headers:{"Content-Type":"application/json"},
            body:JSON.stringify({content:"üìÖ Neue Terminanfrage", embeds:[embed]})
        }).then(() => {
            form.reset();
            slotsGrid.innerHTML = "";
            timeHidden.value = "";
            status.textContent = "Terminanfrage gesendet!";
            status.style.color = "#39ff14";
        }).catch(() => {
            status.textContent = "Fehler beim Senden!";
            status.style.color = "#ff4444";
        }).finally(() => {
            btn.disabled = false;
            btn.textContent = "Termin anfragen";
        });
    });

})();
</script>
</body>
</html>
