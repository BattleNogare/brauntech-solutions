<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>BraunTech Solutions ‚Äì Kontakt</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Hauptlayout -->
    <link rel="stylesheet" href="brauntech.css">
    <!-- Hintergrund / Effekte -->
    <link rel="stylesheet" href="custom.d/background.css">
    <script src="custom.d/background.js" defer></script>

    <style>
        /* ===========================
           Kontaktseite ‚Äì Zusatzstyles
        ============================ */
        .bt-contact-grid {
            display: grid;
            grid-template-columns: minmax(0, 1.1fr) minmax(0, 1.4fr);
            gap: 2rem;
            align-items: flex-start;
        }

        .bt-contact-panel,
        .bt-form-card {
            background: rgba(3, 17, 9, 0.92);
            border: 1px solid var(--bt-border);
            border-radius: var(--bt-radius);
            padding: 1.6rem 1.8rem;
            box-shadow:
                0 0 30px rgba(0, 0, 0, 0.9),
                0 0 18px rgba(57, 255, 20, 0.08);
            backdrop-filter: blur(10px);
        }

        .bt-contact-panel h1,
        .bt-form-card h2 {
            margin-top: 0;
            margin-bottom: 0.75rem;
        }

        .bt-contact-panel p {
            margin-top: 0.25rem;
            color: var(--bt-text-muted);
        }

        .bt-contact-list {
            list-style: none;
            padding: 0;
            margin: 1rem 0 0;
        }

        .bt-contact-list li {
            margin-bottom: 0.45rem;
            display: flex;
            gap: 0.5rem;
            align-items: baseline;
            color: var(--bt-text-muted);
            font-size: 0.95rem;
        }

        .bt-contact-list span.bt-contact-icon {
            font-size: 1.05rem;
            opacity: 0.9;
        }

        /* Formular */
        .bt-form-card h2 {
            font-size: 1.2rem;
        }

        .bt-form {
            margin-top: 1.1rem;
        }

        .bt-form-row {
            margin-bottom: 1rem;
        }

        .bt-form-row label {
            display: block;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.06em;
            font-family: var(--bt-font-mono);
            color: var(--bt-text-muted);
            margin-bottom: 0.3rem;
        }

        .bt-form-row label span.bt-required {
            color: var(--green-light);
            margin-left: 0.15rem;
        }

        .bt-input,
        .bt-textarea {
            width: 100%;
            padding: 0.6rem 0.7rem;
            border-radius: 4px;
            border: 1px solid #163822;
            background: #050b08;
            color: var(--bt-text);
            font: 0.95rem var(--bt-font-main);
            outline: none;
            transition: border-color 0.15s ease, box-shadow 0.15s ease, background 0.15s ease;
        }

        .bt-input:focus,
        .bt-textarea:focus {
            border-color: var(--green-light);
            box-shadow:
                0 0 0 1px rgba(57, 255, 20, 0.35),
                0 0 18px rgba(57, 255, 20, 0.22);
            background: #06130b;
        }

        .bt-textarea {
            min-height: 150px;
            resize: vertical;
        }

        .bt-checkbox-row {
            display: flex;
            align-items: flex-start;
            gap: 0.6rem;
            margin-top: 0.4rem;
        }

        .bt-checkbox-row input[type="checkbox"] {
            margin-top: 0.08rem;
        }

        .bt-checkbox-label {
            font-size: 0.85rem;
            color: var(--bt-text-muted);
        }

        .bt-checkbox-label a {
            text-decoration: underline;
            text-underline-offset: 3px;
        }

        .bt-form-actions {
            margin-top: 1.2rem;
            display: flex;
            align-items: center;
            gap: 0.9rem;
            flex-wrap: wrap;
        }

        .bt-btn-primary {
            border: none;
            border-radius: 999px;
            padding: 0.55rem 1.4rem;
            font-family: var(--bt-font-mono);
            text-transform: uppercase;
            letter-spacing: 0.08em;
            font-size: 0.8rem;
            cursor: pointer;
            background: radial-gradient(circle at top left, var(--green-light), var(--green-mid));
            color: #021005;
            box-shadow:
                0 0 15px rgba(57, 255, 20, 0.5),
                0 0 40px rgba(0, 0, 0, 0.9);
            transition: transform 0.15s ease, box-shadow 0.15s ease, filter 0.15s ease;
        }

        .bt-btn-primary:hover:not(:disabled) {
            transform: translateY(-1px);
            box-shadow:
                0 0 22px rgba(57, 255, 20, 0.7),
                0 0 50px rgba(0, 0, 0, 1);
            filter: brightness(1.05);
        }

        .bt-btn-primary:disabled {
            cursor: wait;
            opacity: 0.7;
        }

        .bt-form-status {
            font-size: 0.8rem;
            color: var(--bt-text-muted);
            min-height: 1.1em;
        }

        .bt-form-status--success {
            color: var(--green-light);
        }

        .bt-form-status--error {
            color: #ff8f8f;
        }

        @media (max-width: 850px) {
            .bt-contact-grid {
                grid-template-columns: minmax(0, 1fr);
            }
        }
    </style>
</head>
<body>

<!-- Rotierende Glow-Kreise (werden per JS gef√ºllt) -->
<div id="bt-glow-orbits"></div>

<!-- Random-Punkte-Layer (werden per JS gef√ºllt) -->
<div id="bt-points"></div>

<!-- NAVBAR wird automatisch geladen -->
<header class="bt-header" data-include="custom.d/navbar.html"></header>

<main class="bt-main">
    <div class="bt-container">
        <div class="bt-contact-grid">
            <!-- Kontakt-Infos -->
            <section class="bt-contact-panel">
                <h1>So erreichen Sie uns</h1>
                <p>Schreiben Sie uns eine Nachricht oder greifen Sie direkt zum H√∂rer.</p>

                <ul class="bt-contact-list">
                    <li>
                        <span class="bt-contact-icon">üè¢</span>
                        <span>
                            <strong>BraunTech Solutions</strong><br>
                            Knuffingen, Hohenstein<br>
                            Deutschland
                        </span>
                    </li>
                    <li>
                        <span class="bt-contact-icon">üìû</span>
                        <span>
                            <!-- TODO: echte Telefonnummer eintragen -->
                            Telefon: <a href="tel:+491234567890">+49&nbsp;1234&nbsp;567890</a>
                        </span>
                    </li>
                </ul>
            </section>

            <!-- Kontaktformular -->
            <section class="bt-form-card" aria-labelledby="kontakt-heading">
                <h2 id="kontakt-heading">Wie d√ºrfen wir Ihnen helfen?</h2>

                <form id="kontakt-form" class="bt-form" novalidate>
                    <div class="bt-form-row">
                        <label for="kontakt-name">
                            Name<span class="bt-required">*</span>
                        </label>
                        <input
                            type="text"
                            id="kontakt-name"
                            name="name"
                            class="bt-input"
                            required
                            autocomplete="name"
                            placeholder="Ihr Name">
                    </div>

                    <div class="bt-form-row">
                        <label for="kontakt-betreff">
                            Betreff<span class="bt-required">*</span>
                        </label>
                        <input
                            type="text"
                            id="kontakt-betreff"
                            name="betreff"
                            class="bt-input"
                            required
                            placeholder="Worum geht es?">
                    </div>

                    <div class="bt-form-row">
                        <label for="kontakt-nachricht">
                            Nachricht<span class="bt-required">*</span>
                        </label>
                        <textarea
                            id="kontakt-nachricht"
                            name="nachricht"
                            class="bt-textarea"
                            required
                            placeholder="Beschreiben Sie kurz Ihr Anliegen ‚Äì je genauer, desto besser."></textarea>
                    </div>

                    <div class="bt-form-row">
                        <div class="bt-checkbox-row">
                            <input
                                type="checkbox"
                                id="kontakt-datenschutz"
                                name="datenschutz"
                                required>
                            <label for="kontakt-datenschutz" class="bt-checkbox-label">
                                Ich habe die
                                <a href="datenschutz.html" target="_blank" rel="noopener">
                                    Datenschutzbestimmungen
                                </a>
                                gelesen und akzeptiere diese.<span class="bt-required">*</span>
                            </label>
                        </div>
                    </div>

                    <div class="bt-form-actions">
                        <button type="submit" class="bt-btn-primary" id="kontakt-submit">
                            Senden
                        </button>
                        <div id="form-status" class="bt-form-status" aria-live="polite"></div>
                    </div>
                </form>
            </section>
        </div>
    </div>
</main>

<!-- FOOTER wird automatisch geladen -->
<footer class="bt-footer" data-include="custom.d/footer.html"></footer>

<script>
    // Falls dein Footer weiterhin ein <span id="bt-year"> enth√§lt,
    // setzt dieser Code wie gewohnt das aktuelle Jahr.
    (function () {
        var yearEl = document.getElementById('bt-year');
        if (yearEl) {
            yearEl.textContent = new Date().getFullYear();
        }
    })();

    // Kontaktformular ‚Üí Discord Webhook
    (function () {
        const form = document.getElementById('kontakt-form');
        const submitBtn = document.getElementById('kontakt-submit');
        const statusEl = document.getElementById('form-status');

        const WEBHOOK_URL = "https://discord.com/api/webhooks/1409574315598544906/zyhruAAcS2YgKTAWFb4TzR3XnDgzVma3f44Hygdn5tFY7RsXHOMgtTiMzQSZMzb3fX_a";

        if (!form) return;

        function setStatus(message, type) {
            statusEl.textContent = message || "";
            statusEl.classList.remove('bt-form-status--success', 'bt-form-status--error');
            if (type) {
                statusEl.classList.add(
                    type === 'success' ? 'bt-form-status--success' : 'bt-form-status--error'
                );
            }
        }

        form.addEventListener('submit', function (e) {
            e.preventDefault();
            setStatus("", null);

            // HTML5-Validierung ansto√üen
            if (!form.checkValidity()) {
                form.reportValidity();
                return;
            }

            const name = document.getElementById('kontakt-name').value.trim();
            const betreff = document.getElementById('kontakt-betreff').value.trim();
            const nachricht = document.getElementById('kontakt-nachricht').value.trim();

            submitBtn.disabled = true;
            submitBtn.textContent = "Wird gesendet ‚Ä¶";
            setStatus("Nachricht wird an BraunTech Solutions √ºbermittelt ‚Ä¶", null);

            const payload = {
                embeds: [
                    {
                        title: "Neue Kontaktanfrage √ºber die Website",
                        color: 0x39ff14,
                        fields: [
                            { name: "Name", value: name || "‚Äì", inline: false },
                            { name: "Betreff", value: betreff || "‚Äì", inline: false },
                            { name: "Nachricht", value: nachricht || "‚Äì", inline: false },
                            { name: "Datenschutz", value: "Akzeptiert ‚úÖ", inline: true }
                        ],
                        timestamp: new Date().toISOString()
                    }
                ]
            };

            fetch(WEBHOOK_URL, {
                method: "POST",
                mode: "no-cors",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify(payload)
            }).then(function () {
                setStatus("Vielen Dank! Ihre Nachricht wurde √ºbermittelt.", "success");
                form.reset();
            }).catch(function () {
                setStatus("Es ist ein Fehler beim Senden aufgetreten. Bitte versuchen Sie es sp√§ter erneut.", "error");
            }).finally(function () {
                submitBtn.disabled = false;
                submitBtn.textContent = "Senden";
            });
        });
    })();
</script>

</body>
</html>
